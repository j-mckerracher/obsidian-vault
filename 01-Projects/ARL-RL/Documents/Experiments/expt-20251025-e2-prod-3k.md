---
title: "E2 Production — 3,000-Episode Validation"
experiment_id: "expt-20251025-e2-prod-3k"
date: "2025-10-25"
last_updated: "2025-10-25T16:44:16Z"
status: "completed"
tags: ["project/arl-rl", "experiment", "e2", "dueling-dqn", "production"]
stage: "E2"
algorithm: "Dueling Double DQN + Cosine LR Scheduler"
dataset: "SC2 FindAndDefeatZerglings"
params:
  LR: 5e-5
  EPS_DECAY: 100000
  EPS_START: 0.90
  EPS_END: 0.01
  BATCH_SIZE: 4
  REPLAY_MEMORY_SIZE: 100000
  TARGET_UPDATE_FREQ: 400
  SCREEN_RESOLUTION: 32
  MINIMAP_RESOLUTION: 32
  STEP_MUL: 16
  USE_DUELING_DQN: true
  USE_DOUBLE_DQN: true
seeds: [4, 6, 8]
episodes: 3000
code_ref:
  repo: "C:\\Users\\jmckerra\\PycharmProjects\\ARL-RL"
  commit: "(not tracked)"
  entrypoint: "training_split.py"
artifacts: "/depot/sbagchi/data/josh/RL/FindAndDefeatZerglings/results_split_advanced/20251025_021201_E1_seed{4,6,8}/"
artifacts_local: "C:\\Users\\jmckerra\\OneDrive - purdue.edu\\Documents\\ARL-RL-Experiment-Results\\10-25-2025\\20251025_021{201,202,206}_E1_seed{4,6,8}"
job_ids: ["(see Job-Submission-Commands)"]
metrics:
  primary:
    name: "100-episode test win rate"
    value: 94.3
    unit: "percent"
    seed_breakdown:
      seed_4: 97.0
      seed_6: 88.0
      seed_8: 98.0
    stdev: 5.7
  training:
    avg_reward_seed_4: 5.02
    avg_reward_seed_6: 1.63
    avg_reward_seed_8: 5.17
hardware:
  gpu: 1
  gpu_model: "A30"
  cpu: 4
  ram_gb: 50
  partition: "a30"
sources:
  - "[[../../../Experiments|Experiments.md]] — Summary table entry"
  - "[[../../../Work Completed/2025-10-25 E2 production 3k validation complete]]"
related:
  - "[[expt-20251025-e2-confirm-1k]] — 1k-episode confirmation (91.3%)"
  - "[[expt-20251025-e2-tuf-sweep]] — 500-episode gate validation (52.7%)"
  - "[[../../../Decisions/E2 Config Freeze]] — Frozen configuration decision"
---

## Summary
Successfully completed production validation of Stage E2 (Dueling DQN) with 3,000-episode runs. Achieved **94.3% mean win rate** across seeds 4, 6, and 8, exceeding 1k-episode results (91.3%) and demonstrating robust scaling. Configuration validated as production-ready.

## Goal
Confirm E2 configuration performance at scale with 3k episodes per seed to validate long-term stability and assess convergence.

## Setup (Hardware/Software)
- **Environment**: Gilbreth HPC, conda GPU env
- **GPU**: NVIDIA A30 (1 per job)
- **Time per seed**: ~10.5 hours wall time
- **QoS**: normal (higher priority than standby)
- **Account**: sbagchi

## Procedure
1. Submit three independent SLURM jobs (seeds 4, 6, 8)
2. Run 3,000 training episodes with frozen E2 configuration
3. Evaluate every 100 episodes on 100-episode test set
4. Aggregate final test results across seeds
5. Compare against prior runs for scaling validation

## Results
### Win Rates (100-episode test)
- **Seed 4**: 97.0% (502.0 total reward, 5.02 avg)
- **Seed 6**: 88.0% (163.0 total reward, 1.63 avg)
- **Seed 8**: 98.0% (517.0 total reward, 5.17 avg)
- **Mean**: 94.3%
- **StdDev**: 5.7 pp

### Performance Progression
- 500 episodes (TUF-sweep-alt-3): 52.7% mean
- 1,000 episodes (run-6): 91.3% mean
- **3,000 episodes (production)**: 94.3% mean ✓
- **Trend**: Robust improvement with scale, plateauing near 95%

## Analysis
- **Scaling**: Excellent scaling behavior from 1k→3k episodes (+3% mean improvement)
- **Variance**: Very low stdev (5.7 pp) indicates stable, reproducible training
- **Seed 8 breakthrough**: Reached 98%, highest individual seed performance
- **Convergence**: Appears to plateau around 94-98%, suggesting near-optimal configuration

## Issues
None. All runs completed successfully without errors or GPU issues.

## Next Steps
1. **Resolution scaling (64×64)**: Test frozen E2 config at higher resolution to improve spatial awareness
2. **Stage E4**: Explore N-step returns (n=3) for credit assignment improvements
3. **Extended validation**: Optional 4k-5k episode runs to confirm convergence ceiling
4. **Checkpoint selection**: Archive strategic checkpoints; prepare best model (seed 8 ep3000) for deployment

## Jobs
- [[../../Job-Submission-Commands/2025-10-25-expt-20251025-e2-prod-3k-seed4]]
- [[../../Job-Submission-Commands/2025-10-25-expt-20251025-e2-prod-3k-seed6]]
- [[../../Job-Submission-Commands/2025-10-25-expt-20251025-e2-prod-3k-seed8]]

## Artifacts
- Configs: `config.json` per seed in artifacts path
- Logs: `train.log` per seed
- Results: `eval/test_results.json` per seed
- Models: `model_ep*.pth` (every 100 episodes)
- Training curves: `training_curves.png` per seed
- Aggregated CSV: `/depot/sbagchi/data/josh/RL/FindAndDefeatZerglings/results_split_advanced/e2_results.csv`

## Changelog
- 2025-10-25T16:44:16Z Created from template with final results
- 2025-10-25T14:19 Documented production results in Work Completed
